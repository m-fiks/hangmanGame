<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>Hangman</title>
    <script type="text/javascript" src="./script.js"></script>
</head>
<body>
    <header>
        <h1>Basic Star Wars Hangman!</h1>
        <p>Guess the character name below ... May the Force be with you</p>
    </header>
<br><br>
<p id="target"></p>
<br>
<div class="guessing">
<p id="letters-guessed">Letters Already Guessed: </p>
<p id="letters-guessed2"></p>
</div>
<div class="lives">
    <p id="lives-2">Guesses Left: </p>
    <p id="lives-3"></p>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
$(document).ready(function() {

'use strict';
//variables
const characters = ['leia', 'luke', 'han', 'chewy'];
//where guessed letters originally pushed to
let correctArray = [];
let wrongArray= [];
//array of letters filtered to only contain one of each letter
let uniqueCorrect=[];
let uniqueWrong=[];

let underScore= [];
let underScoreCounter= 0;
//counters
let rightGuessCounter=0;

// pick random word from characters array
let chosenOne = characters[Math.floor(Math.random() * characters.length)];
//console.log(chosenOne);

let guessesRemaining = chosenOne.length + 3;

//create underscores to correspond to chosen random word
//=> ES6 (skip typing function and return)
//() meaning no parameters
let underScoreCreator = () => {
    for (let i = 0; i < chosenOne.length; i++){
        underScore[i] = "_";
        underScoreCounter=(chosenOne.length);
        }
    return underScore;
}

//innerHTML business
//display '_' for selected word
document.querySelector('#target').innerHTML=(underScoreCreator().join(' '));

document.querySelector('#lives-3').innerHTML=(guessesRemaining);

//game play
//get keyboard input(guess from player)
document.addEventListener("keypress", (event) => {
    //get numerical code from key pressed (a-z : 65-90)
    let keyNumbs = event.keyCode;
    //console.log(keyNumbs);
    let keyLetter = String.fromCharCode(keyNumbs);
    //console.log(keyLetter);

    //compare to chosenOne
    //if user guesses a correct letter push to correctArray - else push to wrongArray
    if(chosenOne.indexOf(keyLetter) > -1) {
        correctArray.push(keyLetter);
        //only allow for one instance of a letter
        let uniqueCorrect = correctArray.filter(function(item, i, ar){ return ar.indexOf(item) === i; });
        // console.log(uniqueCorrect.length);
        // console.log(chosenOne.length);

    } else {
        wrongArray.push(keyLetter);
        let uniqueWrong = wrongArray.filter(function(item, i, ar){ return ar.indexOf(item) === i; });
        document.querySelector("#letters-guessed2").innerHTML =(uniqueWrong);
        guessesRemaining--;
        document.querySelector("#lives-3").innerHTML =(guessesRemaining);

    }

    //have letter take place of underscore
     for (let j=0; j < chosenOne.length; j++){
        if (chosenOne[j] === keyLetter) {
        underScore[j] = keyLetter;
        guessesRemaining--;
        document.querySelector("#lives-3").innerHTML =(guessesRemaining);
    }
}
    


document.querySelector('#target').innerHTML=(underScore.join(' '));
//lose conditions
for (let j=0; j < chosenOne.length; j++){
    if (guessesRemaining === 0){
        alert('Bummer..you did not guess the word! Try again!');
        break;
    }
}

});



    // alert('you win');
    // }


});

</script>

</body>
</html>